<% layout('layouts/boilerplate') -%>
<link rel="stylesheet" href="/CSS/listings.css">

<body>
    <div class="header-container">
        <h1 class="main-title">Find Your Perfect <br>Student Rental 🏡</h1>
        <p class="subtitle">Search for affordable rooms and guest houses in top cities.</p>
    </div>

    <div class="card-grid">
        <% allListings.forEach((list) => { %>
        <a href="/listings/<%=list._id%>" class="card-link">
            <div class="rental-card">
                <div class="card-image-wrapper">
                    <img src="<%=list.image.url%>" alt="<%= list.title %>" class="card-image" />
                    <div class="image-overlay"></div>
                </div>
                <div class="card-content">
                    <h2 class="card-title"><%= list.title %></h2>
                    <p class="card-location"><i class="fas fa-map-marker-alt"></i> <%=list.location %>, <%=list.state %></p>
                    <div class="card-price-container">
                        <span class="card-price">₹ <%= (list.price && typeof list.price === 'number') ? list.price.toLocaleString("en-IN") : "N/A" %></span><span class="price-unit">/month</span>
                    </div>
                </div>
            </div>
        </a>
        <% }) %>
    </div>
</body>